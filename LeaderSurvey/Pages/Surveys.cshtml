@page
@model LeaderSurvey.Pages.SurveysModel
@{
    ViewData["Title"] = "Surveys";
}

<div class="container">
    <div class="filters-section">
        <div class="filter-group">
            <select id="dateFilter" class="cfa-select" onchange="applyFilters()">
                <option value="">Select Month</option>
                @foreach (var date in Model.AvailableDates)
                {
                    <option value="@date.ToString("yyyy-MM")">@date.ToString("MMMM yyyy")</option>
                }
            </select>
        </div>
        <!-- Other filters -->
    </div>

    <div class="table-responsive">
        <table id="surveysTable" class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Leader</th>
                    <th>Area</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var survey in Model.Surveys)
                {
                    <tr data-leader="@survey.LeaderId" 
                        data-area="@survey.Area" 
                        data-date="@survey.MonthYear?.ToLocalTime().ToString("yyyy-MM")" 
                        data-status="@survey.Status.ToLower()">
                        <td>@survey.Name</td>
                        <td>@survey.Leader?.Name</td>
                        <td>@survey.Area</td>
                        <td>@survey.LocalDate.ToString("g")</td>
                        <td>
                            <span class="status-badge status-@survey.Status.ToLower()">
                                @survey.Status
                            </span>
                        </td>
                        <td>
                            <!-- Actions -->
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script src="~/js/surveys.js"></script>
}
